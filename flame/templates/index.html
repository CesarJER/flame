<!DOCTYPE html>
<html>
  <head>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $("#predict").click(function(e) {
          $.post("/predictor", {//"ifile": $("input[name='ifile']").files[0], 
                                "ifile": document.getElementById("ifile").files[0].name,
                                "model": $("#myselect option:selected").text(),
                                "version": $("input[name='version']").val(),})
           .done(function(results) {
            document.getElementById("data-body").innerHTML = results;
            console.log(results)

            var text = '{ "employees" : [' +
                      '{ "firstName":"John" , "lastName":"Doe" },' +
                      '{ "firstName":"Anna" , "lastName":"Smith" },' +
                      '{ "firstName":"Peter" , "lastName":"Jones" } ]}'; 

            var myjson = JSON.parse(text);
            var tbl_body = "";
            var odd_even = false;
            $.each(myjson, function() {
                var tbl_row = "";
                console.log(this)
                $.each(this, function(k , v) {
                  tbl_body += "<tr><td>"+v['firstName']+"</td><td>"+v['lastName']+"</td></tr>"; 
                })          
            })
            document.getElementById("newtable").innerHTML = tbl_body;

          });

          e.preventDefault();
        });

      });
    </script>
  </head>
  <body>
    <div class="container">
        <div class="header">
          <ul class="nav nav-pills pull-right">
              <li><a href="http://phi.upf.edu">PharmacoInformatics group</a></li>
          </ul>
          <h2 >Flame predict interface</h2>
        </div>

        <div class="row">
          <div class ="col-md-8">
            <form class="form-horizontal">

              <div class="form-group">
                  <label class="col-sm-2 control-label" for="exampleInputFile">Input SDfile</label>
                  <div class="col-sm-8">
                    <!-- <input class="form-control" type="text" value="minicaco.sdf" id="ifile" name="ifile"> -->
                    <input type="file" id="ifile" name="ifile">
                  </div>
              </div>

              <div class="form-group">
                  <label class="col-sm-2 control-label" for="model">model</label>
                  <div class="col-sm-8">
                      <select class="form-control" id="myselect" name="model">
                          {% for m in model_list %}
                          <option name="{{ m }}">{{m}}</option>
                          {% endfor %}
                      </select>
                  </div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 control-label" for="version">version</label>
                <div class="col-sm-8">
                  <input class="form-control" type="number" value=0 name="version">
                </div>
              </div>

            </form>
        </div>

        <div class="col-md-4">
          <button class="btn btn-primary active" role="button" id="predict">Predict</button>
        </div>

      </div>

        <div>
          <h3>Results</h3>
          <pre id="data-body">[not run]</pre>
          <table class= "table table-bordered table-stripped" id="newtable" >
          </table>
        </div>

    </div>  
  </body>
</html>